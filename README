REQUIRED SOFTWARE:

- scons (requires python)
- libglew1.5-dev
- glew-utils (?)
- libglut3-dev (?)
- LLVM 2.9 final
- packetizer
- AMD APP SDK
- Intel OpenCL Beta
- clc tool from former ATI Stream SDK (included in folder 'bin')

On Windows and Unix, glew/glut are possibly not required with the included libraries.
On Mac OS X, glew has to be downloaded and built in order to get a working libGLEW.a.


INSTALLATION:

IMPORTANT: .bc files can not be generated under windows (clc only works on UNIX)

- build llvm
- build packetizer
- set environment variables $LLVM_INSTALL_DIR and $PACKETIZER_INSTALL_DIR appropriately
- install AMD APP SDK
	- Linux: place ICD registration config files in /etc/OpenCL/vendors
		- should be attempted automatically by installer
		-> requires root access!
	- set $AMDAPPSDKROOT to sdk root dir if not done by installer
	- $PATH has to include path to libamdocl64.so / amdocl64.dll (libamdocl.so/amdocl.dll for 32bit)
		- should be $AMDAPPSDKROOT/lib/x86_64/ (x86 for 32bit) or Windows\System32
	- building the SDK is not required (only need the libraries)
- install Intel OpenCL SDK
	- Linux: place ICD registration config files in /etc/OpenCL/vendors
		- should be attempted automatically by installer
		-> requires root access!
	- set $INTELOCLSDKROOT to sdk root dir if not done by installer
	- $PATH has to include path to libintelocl.so / intelocl.dll
		- should be $INTELOCLSDKROOT/lib/x64/ (x86 for 32bit)
	- building the SDK is not required (only need the libraries)
- run scons
	- options (default shown):
		debug         = 0
		debug-runtime = 0
		profile       = 0
		packetize     = 0 (enable packetization)
		openmp        = 0 (enable openmp multi threading)
		threads       = 0 (set number of threads to use if openmp is enabled (default: 4))
		split         = 0 (disable mem access optimizations)
		static        = 0 (build static driver library instead of dynamic)


additional step for windows installation:

- copy glut32.dll and glew32.dll from lib to Windows/system32


Installing the OpenCL Installable Client Driver (ICD):
( consider htpp://www.khronos.org/registry/cl/extensions/khr/cl_khr_icd.txt )

- Windows:
	1) add DWORD value to HKEY_LOCAL_MACHINE\SOFTWARE\Khronos\OpenCL\Vendors with name "PacketizedOpenCL.dll"
	2a) make sure ./lib is in your $PATH
	OR
	2b) copy lib/packetizedOpenCL.dll to %WINDOWS%\system32

- Linux:
	1) copy lib/packetizedOpenCL.icd to /etc/OpenCL/vendors/
	2) make sure ./lib/x86_64 is in your $LD_LIBRARY_PATH
	3) make sure ./lib is in your $PATH (?)


RUNNING SAMPLES:

- in order to successfully run samples using PacketizedOpenCL, make sure ./lib and ./lib/x86_64 (x86 for 32bit) are in your $PATH ($LD_LIBRARY_PATH on unix), otherwise the OpenCL ICD will not find the driver and list it as an available platform

- in order to successfully run samples using AMD OpenCL, make sure as.exe and ld.exe from $AMDAPPSDKROOT/bin/x86_64 are used (e.g. MinGW puts its own bin-directories in front of the PATH variable)
- also make sure $AMDAPPSDKROOT is always quoted (directories with spaces)

- switch between PacketizedOpenCL/AMD/Intel by running the executables in the "proprietary" folder with flag "-p X", where X is the number of the appropriate platform


NOTES ON SAMPLES:

- Samples ending with 'Simple' are usually simplified ones. Modifications usually come down to manually replacing vector code by scalar code
  in order to enable use of automatic vectorization.
- Histogram has been modified to take a sharedArray of type uint instead of uchar to allow for packetization
- MatrixTranspose might have problems with OpenMP 3.0 collapse -> check!


TROUBLESHOOTING:

Any System
----------------------------------------------------------------------
Packetized OpenCL Platform does not appear.
----------------------------------------------------------------------
Make sure the ICD is correctly registered and the path to the corresponding library is in your LD_LIBRARY_PATH (Unix) or PATH (Windows).

Linux 64bit
----------------------------------------------------------------------
error while loading shared libraries: libOpenCL.so.1: cannot open shared object file: No such file or directory
----------------------------------------------------------------------
You are missing ./lib/x86_64 (x86 for 32bit) from your LD_LIBRARY_PATH.

Linux 64bit
----------------------------------------------------------------------
Error: clGetPlatformIDs failed. Error code : CL_PLATFORM_NOT_FOUND_KHR
validatePlatfromAndDeviceOptions failed.
----------------------------------------------------------------------
a) The OpenCL ICD list does not point to the correct AMD APP SDK lib (libamdocl64.so)
b) You are missing the path to the AMD APP SDK libs (libamdocl64.so) from your LD_LIBRARY_PATH (should be $AMDAPPSDKROOT/lib/x86_64).
This can happen e.g. if you have the ICD of an older SDK installed and the library was renamed.
The error is likely only to appear if you only have that one platform - in cases with other valid platforms, it will be silently ignored


